@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;1,400&family=Space+Grotesk:wght@400;500;600;700&display=swap");
@import "./styles/tokens.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html,
  body,
  #root {
    @apply min-h-full;
  }

  #root {
    position: relative;
    isolation: isolate;
    z-index: 1;
  }

  body {
    @apply bg-bg-primary text-text-primary font-body antialiased;
    position: relative;
    background-color: var(--bg-primary);
    background-image:
      radial-gradient(130% 90% at 92% -12%, rgba(89, 184, 255, var(--bg-glow-opacity)), transparent 64%),
      radial-gradient(135% 108% at -8% 112%, rgba(232, 255, 89, calc(var(--bg-glow-opacity) * 0.82)), transparent 68%),
      repeating-linear-gradient(to right, rgba(240, 237, 232, var(--bg-grid-opacity)) 0 1px, transparent 1px 58px),
      repeating-linear-gradient(to bottom, rgba(240, 237, 232, var(--bg-grid-opacity)) 0 1px, transparent 1px 58px),
      linear-gradient(180deg, #0b0d10 0%, #0c0d0e 60%, #0b0d10 100%);
    background-size: auto, auto, 58px 58px, 58px 58px, auto;
    background-position: center, center, center, center, center;
    background-blend-mode: normal, normal, normal, normal, normal;
  }

  body::before {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    opacity: var(--noise-opacity);
    mix-blend-mode: soft-light;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.05' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='0.95'/%3E%3C/svg%3E");
    background-size: 220px 220px;
  }

  a {
    @apply text-inherit no-underline;
  }

  :focus-visible {
    outline: 2px solid var(--accent-primary);
    outline-offset: 2px;
  }
}

@layer components {
  .site-container {
    @apply mx-auto w-full max-w-6xl px-4 sm:px-6 lg:px-8;
  }

  .panel {
    @apply rounded-2xl border border-border-base bg-bg-surface;
    box-shadow: 0 16px 34px rgba(0, 0, 0, 0.18);
  }

  .hero-surface {
    background-image:
      radial-gradient(128% 88% at 88% -8%, rgba(89, 184, 255, calc(var(--bg-glow-opacity) * 0.42)), transparent 64%),
      radial-gradient(118% 108% at -12% 114%, rgba(232, 255, 89, calc(var(--bg-glow-opacity) * 0.22)), transparent 70%),
      repeating-linear-gradient(to right, rgba(240, 237, 232, var(--bg-hero-grid-opacity)) 0 1px, transparent 1px 84px),
      repeating-linear-gradient(to bottom, rgba(240, 237, 232, var(--bg-hero-grid-opacity)) 0 1px, transparent 1px 84px);
    background-size: auto, auto, 84px 84px, 84px 84px;
    background-position: center;
  }

  .hero-readability-mask {
    pointer-events: none;
    background:
      radial-gradient(88% 110% at 24% 46%, rgba(12, 13, 14, 0.1) 0%, rgba(12, 13, 14, 0.56) 56%, rgba(12, 13, 14, 0.84) 100%),
      linear-gradient(90deg, rgba(12, 13, 14, 0.52) 0%, rgba(12, 13, 14, 0.28) 42%, rgba(12, 13, 14, 0.06) 74%, rgba(12, 13, 14, 0) 100%);
  }

  .hero-readability-vignette {
    pointer-events: none;
    background: linear-gradient(180deg, rgba(12, 13, 14, 0.08) 0%, rgba(12, 13, 14, 0.42) 100%);
  }

  .hero-depth-layer {
    position: absolute;
    inset: 0;
    pointer-events: none;
    will-change: transform;
  }

  .hero-depth-layer-1 {
    mix-blend-mode: screen;
  }

  .hero-depth-layer-2 {
    opacity: 0.72;
  }

  .hero-depth-layer-3 {
    opacity: 0.88;
  }

  .hero-depth-glow {
    position: absolute;
    border-radius: 999px;
    filter: blur(56px);
  }

  .hero-depth-glow-primary {
    top: 6%;
    right: 8%;
    width: clamp(240px, 34vw, 500px);
    height: clamp(180px, 22vw, 320px);
    background: radial-gradient(circle at center, rgba(89, 184, 255, 0.28), rgba(89, 184, 255, 0));
  }

  .hero-depth-glow-secondary {
    left: -12%;
    bottom: -20%;
    width: clamp(220px, 32vw, 440px);
    height: clamp(220px, 30vw, 420px);
    background: radial-gradient(circle at center, rgba(232, 255, 89, 0.18), rgba(232, 255, 89, 0));
  }

  .hero-blueprint-line {
    fill: none;
    stroke: rgba(89, 184, 255, 0.22);
    stroke-width: 1;
  }

  .hero-blueprint-projection {
    fill: none;
    stroke: rgba(89, 184, 255, 0.12);
    stroke-width: 1;
  }

  .nav-link {
    @apply relative py-2 text-sm text-text-secondary transition-colors duration-200 hover:text-text-primary;
  }

  .nav-link::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 2px;
    width: 100%;
    height: 1px;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 220ms ease;
    background: var(--accent-primary);
  }

  .nav-link-active {
    @apply text-text-primary;
  }

  .nav-link-active::after {
    transform: scaleX(1);
  }

  .signal-sweep {
    position: relative;
    overflow: hidden;
  }

  .signal-sweep::before {
    content: "";
    position: absolute;
    inset: 0;
    transform: translateX(-130%);
    background: linear-gradient(90deg, transparent, rgba(12, 13, 14, 0.25), transparent);
    transition: transform 340ms ease;
  }

  .signal-sweep:hover::before {
    transform: translateX(130%);
  }

  .flow-grid {
    background-image:
      linear-gradient(to right, var(--border) 1px, transparent 1px),
      linear-gradient(to bottom, var(--border) 1px, transparent 1px);
    background-size: 36px 36px;
    mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 1), transparent);
  }

  .reveal {
    opacity: 0;
    transform: translateY(18px);
    transition: opacity 420ms ease, transform 420ms ease;
  }

  .reveal-visible {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes flowDash {
  to {
    stroke-dashoffset: -32;
  }
}

@keyframes heroRoutePulse {
  to {
    stroke-dashoffset: -1560;
  }
}

@keyframes heroSignalSweep {
  from {
    transform: translateX(-12%);
  }
  to {
    transform: translateX(172%);
  }
}

@keyframes nodePulse {
  0%,
  100% {
    opacity: 0.35;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.18);
  }
}

@keyframes railSweep {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(140%);
  }
}

.flow-line {
  stroke-dasharray: 6 10;
  animation: flowDash 5s linear infinite;
}

.hero-route-pulse {
  stroke-dasharray: 160 1400;
  animation: heroRoutePulse 10.5s linear infinite;
}

.hero-route-track {
  fill: none;
  stroke: rgba(240, 237, 232, 0.12);
  stroke-width: 1.1;
}

.hero-route-line {
  fill: none;
  stroke: url(#hero-route-gradient-v3);
  stroke-width: 2;
  filter: drop-shadow(0 0 10px rgba(89, 184, 255, 0.14));
}

.hero-route-node {
  fill: rgba(232, 255, 89, 0.68);
}

.hero-signal-sweep {
  opacity: 0.17;
  background: linear-gradient(
    94deg,
    rgba(89, 184, 255, 0) 0%,
    rgba(89, 184, 255, 0.14) 39%,
    rgba(232, 255, 89, 0.15) 58%,
    rgba(232, 255, 89, 0) 100%
  );
  filter: blur(0.32px);
}

.hero-signal-sweep-animate {
  animation: heroSignalSweep 12s linear infinite;
}

.node-pulse {
  transform-origin: center;
  animation: nodePulse 3.1s ease-in-out infinite;
}

.processing-rail::before {
  content: "";
  position: absolute;
  inset: 0;
  width: 40%;
  background: linear-gradient(90deg, transparent, rgba(89, 184, 255, 0.14), transparent);
  animation: railSweep 3.2s linear infinite;
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .signal-sweep::before {
    display: none;
  }

  .hero-route-pulse,
  .hero-signal-sweep-animate,
  .flow-line,
  .node-pulse,
  .processing-rail::before {
    animation: none !important;
  }
}
